<div class="dashboard-container">
      <!-- Overlay para mobile cuando el menú está abierto -->
      <div
        class="menu-overlay"
        [class.active]="isMenuExpanded && isMobile"
        (click)="toggleMenu()"
      ></div>

      <!-- Sidebar Menu -->
      <aside class="sidebar" [class.expanded]="isMenuExpanded">
        <!-- Header del Sidebar -->
        <div class="sidebar-header">
          <div class="brand">
            <fa-icon [icon]="faBars" class="brand-icon"></fa-icon>
            <span class="brand-text" *ngIf="isMenuExpanded">EDUTRACK</span>
          </div>
          <button class="close-menu-btn" (click)="toggleMenu()" *ngIf="isMobile && isMenuExpanded">
            <fa-icon [icon]="faTimes"></fa-icon>
          </button>
        </div>

        <!-- Navegación -->
        <nav class="sidebar-nav">
          <ul class="menu-list">
            <li *ngFor="let item of menuItems" class="menu-item">
              <!-- Item sin hijos -->
              <a
                *ngIf="!item.children"
                [routerLink]="item.route"
                class="menu-link"
                [class.active]="isRouteActive(item.route)"
                (click)="navigateTo(item.route)"
              >
                <span class="menu-icon">
                  <fa-icon [icon]="item.icon"></fa-icon>
                </span>
                <span class="menu-label" *ngIf="isMenuExpanded">{{ item.label }}</span>
                <span
                  *ngIf="item.badge && isMenuExpanded"
                  class="menu-badge"
                  [ngClass]="getBadgeClass(item.badgeColor)"
                >
                  {{ item.badge }}
                </span>
              </a>

              <!-- Item con hijos (dropdown) -->
              <div *ngIf="item.children">
                <button
                  class="menu-link dropdown-toggle"
                  [class.active]="isRouteActive(item.route)"
                  (click)="toggleSubmenu(item.id)"
                >
                  <span class="menu-icon">
                    <fa-icon [icon]="item.icon"></fa-icon>
                  </span>
                  <span class="menu-label" *ngIf="isMenuExpanded">{{ item.label }}</span>
                  <span
                    *ngIf="item.badge && isMenuExpanded"
                    class="menu-badge"
                    [ngClass]="getBadgeClass(item.badgeColor)"
                  >
                    {{ item.badge }}
                  </span>
                  <span class="chevron" *ngIf="isMenuExpanded">
                    <fa-icon [icon]="faChevronRight" [class.rotated]="isSubmenuExpanded(item.id)">
                    </fa-icon>
                  </span>
                </button>

                <!-- Submenú -->
                <ul class="submenu" *ngIf="isSubmenuExpanded(item.id) && isMenuExpanded">
                  <li *ngFor="let child of item.children" class="submenu-item">
                    <a
                      [routerLink]="child.route"
                      class="submenu-link"
                      [class.active]="isRouteActive(child.route)"
                      (click)="navigateTo(child.route)"
                    >
                      <span class="submenu-icon">
                        <fa-icon [icon]="child.icon"></fa-icon>
                      </span>
                      <span class="submenu-label">{{ child.label }}</span>
                      <span
                        *ngIf="child.badge"
                        class="menu-badge"
                        [ngClass]="getBadgeClass(child.badgeColor)"
                      >
                        {{ child.badge }}
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </nav>

        <!-- Footer del Sidebar -->
        <div class="sidebar-footer">
          <div class="user-info" *ngIf="currentUser">
            <div class="user-avatar">
              {{ getUserInitials() }}
            </div>
            <div class="user-details" *ngIf="isMenuExpanded">
              <div class="user-name">{{ currentUser.fullName }}</div>
              <div class="user-role">{{ currentUser.role }}</div>
            </div>
          </div>
          <button
            class="logout-btn"
            (click)="logout()"
            [disabled]="loggingOut"
            [title]="isMenuExpanded ? '' : 'Cerrar Sesión'"
          >
            <fa-icon [icon]="faSignOutAlt"></fa-icon>
            <span *ngIf="isMenuExpanded">{{ loggingOut ? 'Cerrando...' : 'Cerrar Sesión' }}</span>
          </button>
        </div>
      </aside>

      <!-- Contenido Principal -->
      <main class="main-content" [class.shifted]="isMenuExpanded">
        <!-- Header -->
        <header class="content-header">
          <button class="menu-toggle-btn" (click)="toggleMenu()">
            <fa-icon [icon]="isMenuExpanded ? faTimes : faBars"></fa-icon>
          </button>

          <div class="header-title">
            <h1>{{ getGreeting() }}, {{ currentUser?.fullName }}!</h1>
            <p class="subtitle">Bienvenido al sistema de gestión educativa</p>
          </div>

          <div class="header-actions">
            <div class="user-profile">
              <div class="profile-avatar">
                {{ getUserInitials() }}
              </div>
              <div class="profile-info">
                <span class="profile-name">{{ currentUser?.fullName }}</span>
                <span class="profile-role">{{ currentUser?.role }}</span>
              </div>
            </div>
          </div>
        </header>

        <!-- Contenido dinámico (router-outlet) -->
        <div class="content-body">
          <router-outlet></router-outlet>
        </div>
      </main>
    </div>
